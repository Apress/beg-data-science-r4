## -----------------------------------------------------------------------------
(x <- 2 / 3)
(y <- x ** 2)


## -----------------------------------------------------------------------------
(x <- 1:4 / 3)
(y <- x ** 2)


## -----------------------------------------------------------------------------
x <- 1:5
y <- 6:10


## -----------------------------------------------------------------------------
(z <- x + y)


## -----------------------------------------------------------------------------
z <- vector(length = length(x))
for (i in seq_along(x)) {
    z[i] <- x[i] + y[i]
}
z


## -----------------------------------------------------------------------------
sqrt((1:5)**2)
sin(sqrt((1:5)**2))


## -----------------------------------------------------------------------------
x <- 1:12
y <- 1:2
x + y
z <- 1:3
x + z


## -----------------------------------------------------------------------------
z <- 1:5
x + z


## -----------------------------------------------------------------------------
(x <- 1:4 / 3)
(y <- x ** 2)


## -----------------------------------------------------------------------------
x <- 1:10
if (x %% 2 == 0) 5 else 15


## -----------------------------------------------------------------------------
x <- 1:10
ifelse(x %% 2 == 0, 5, 15)


## -----------------------------------------------------------------------------
f <- function(x, y) sqrt(x ** y)
f(1:6, 2)
f(1:6, 1:2)


## -----------------------------------------------------------------------------
role_table <- list("Thomas" = "Instructor", 
                   "Henrik" = "Student",
                   "Kristian" = "Student",
                   "Randi" = "Student",
                   "Heidi" = "Student",
                   "Manfred" = "Student")

map_to_role <- function(name) role_table[[name]]


## -----------------------------------------------------------------------------
map_to_role("Thomas")
map_to_role("Henrik")


## -----------------------------------------------------------------------------
x <- c("Thomas", "Henrik", "Randi")
map_to_role(x)


## -----------------------------------------------------------------------------
map_to_role <- Vectorize(map_to_role)
map_to_role(x)


## -----------------------------------------------------------------------------
role_table[c("Thomas", "Henrik", "Randi")]


## -----------------------------------------------------------------------------
map_to_role_2 <- function(names) unlist(role_table[names])

x <- c("Thomas", "Henrik", "Randi")
map_to_role_2(x)


## -----------------------------------------------------------------------------
x <- list("first" = list("second" = "foo"), "third" = "bar")
x[[c("first", "second")]]


## -----------------------------------------------------------------------------
x[["first"]][["second"]]


## -----------------------------------------------------------------------------
m <- matrix(1:6, nrow = 2, byrow = TRUE)
m


## -----------------------------------------------------------------------------
apply(m, 1, \(x) paste(x, collapse = ":"))


## -----------------------------------------------------------------------------
apply(m, 2, \(x) paste(x, collapse = ":"))


## -----------------------------------------------------------------------------
apply(m, c(1, 2), \(x) paste(x, collapse = ":"))


## -----------------------------------------------------------------------------
apply(m, 1, \(x) c(x,x))
apply(m, 2, \(x) c(x,x))


## -----------------------------------------------------------------------------
apply(m, c(1,2), \(x) c(x,x))


## -----------------------------------------------------------------------------
x <- apply(m, c(1,2), \(x) c(x,x))
k <- dim(x)[3]
n <- dim(x)[2]
for (i in 1:n) {
  for (j in 1:k) {
    print(x[,i,j])
  }
}


## -----------------------------------------------------------------------------
sumpow <- \(x, n) sum(x) ** n
apply(m, 1, sumpow)


## -----------------------------------------------------------------------------
apply(m, 1, sumpow, 2)


## -----------------------------------------------------------------------------
apply(m, 1, sumpow, n = 2)


## -----------------------------------------------------------------------------
(l <- list(1, 2, 3))
lapply(l, \(x) x**2)


## -----------------------------------------------------------------------------
l <- list(a=1, b=2, c=3)
lapply(l, \(x) x**2)


## -----------------------------------------------------------------------------
lapply(1:3, \(x) x**2)


## -----------------------------------------------------------------------------
lapply(list(a=1:3, b=4:6), \(x) x**2)


## -----------------------------------------------------------------------------
sapply(1:3, \(x) x**2)


## -----------------------------------------------------------------------------
vapply(1:3, \(x) x**2, 1)


## -----------------------------------------------------------------------------
2 + 2
`+`(2, 2)


## -----------------------------------------------------------------------------
`%or die%` <- function(test, msg) if (!test) stop(msg)

x <- 5
(x != 0) %or die% "x should not be zero"

x <- 0
(x != 0) %or die% "x should not be zero"


## -----------------------------------------------------------------------------
v <- 1:4
names(v) <- c("a", "b", "c", "d")
v


## -----------------------------------------------------------------------------
`foo<-` <- function(x, value) {
  x$foo <- value
  x
}

`bar<-` <- function(x, value) {
  x$bar <- value
  x
}

x <- list(foo = 1, bar = 2)

x$foo
foo(x) <- 3
x$foo

x$bar
bar(x) <- 3
x$bar


## -----------------------------------------------------------------------------
y <- x
foo(x) <- 5
x
y


## -----------------------------------------------------------------------------

`foo<-` <- function(x, val) {
  x$foo <- val
  x
}

x <- list(foo = 1, bar = 2)
foo(x) <- 3


## -----------------------------------------------------------------------------
`foo<-` <- function(y, value) {
  y$foo <- value
  y
}

x <- list(foo = 1, bar = 2)
foo(x) <- 3
x$foo


## -----------------------------------------------------------------------------
`modify<-` <- function(x, variable, value) {
  x[variable] <- value
  x
}

x <- list(foo = 1, bar = 2)
modify(x, "foo") <- 3
modify(x, "bar") <- 4
x$foo
x$bar


## -----------------------------------------------------------------------------
x <- 1:4
f <- function(x) {
  x[2] <- 5
  x
}
x
f(x)
x

